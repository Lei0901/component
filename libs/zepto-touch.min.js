(function(f){var g={},a,k,c,i,d=750,l;function j(p,o,r,q){return Math.abs(p-o)>=Math.abs(r-q)?(p-o>0?"Left":"Right"):(r-q>0?"Up":"Down")}function n(){i=null;if(g.last){g.el.trigger("longTap");g={}}}function b(){if(i){clearTimeout(i)}i=null}function e(){if(a){clearTimeout(a)}if(k){clearTimeout(k)}if(c){clearTimeout(c)}if(i){clearTimeout(i)}a=k=c=i=null;g={}}function m(o){return(o.pointerType=="touch"||o.pointerType==o.MSPOINTER_TYPE_TOUCH)&&o.isPrimary}function h(p,o){return(p.type=="pointer"+o||p.type.toLowerCase()=="mspointer"+o)}f(document).ready(function(){var p,t,q=0,r=0,s,o;if("MSGesture" in window){l=new MSGesture();l.target=document.body}f(document).bind("MSGestureEnd",function(v){var u=v.velocityX>1?"Right":v.velocityX<-1?"Left":v.velocityY>1?"Down":v.velocityY<-1?"Up":null;if(u){g.el.trigger("swipe");g.el.trigger("swipe"+u)}}).on("touchstart MSPointerDown pointerdown",function(u){if((o=h(u,"down"))&&!m(u)){return}s=o?u:u.touches[0];if(u.touches&&u.touches.length===1&&g.x2){g.x2=undefined;g.y2=undefined}p=Date.now();t=p-(g.last||p);g.el=f("tagName" in s.target?s.target:s.target.parentNode);a&&clearTimeout(a);g.x1=s.pageX;g.y1=s.pageY;if(t>0&&t<=250){g.isDoubleTap=true}g.last=p;i=setTimeout(n,d);if(l&&o){l.addPointer(u.pointerId)}}).on("touchmove MSPointerMove pointermove",function(u){if((o=h(u,"move"))&&!m(u)){return}s=o?u:u.touches[0];b();g.x2=s.pageX;g.y2=s.pageY;q+=Math.abs(g.x1-g.x2);r+=Math.abs(g.y1-g.y2)}).on("touchend MSPointerUp pointerup",function(u){if((o=h(u,"up"))&&!m(u)){return}b();if((g.x2&&Math.abs(g.x1-g.x2)>30)||(g.y2&&Math.abs(g.y1-g.y2)>30)){c=setTimeout(function(){if(g.el){g.el.trigger("swipe");g.el.trigger("swipe"+(j(g.x1,g.x2,g.y1,g.y2)))}g={}},0)}else{if("last" in g){if(q<30&&r<30){k=setTimeout(function(){var v=f.Event("tap");v.cancelTouch=e;if(g.el){g.el.trigger(v)}if(g.isDoubleTap){if(g.el){g.el.trigger("doubleTap")}g={}}else{a=setTimeout(function(){a=null;if(g.el){g.el.trigger("singleTap")}g={}},250)}},0)}else{g={}}}}q=r=0}).on("touchcancel MSPointerCancel pointercancel",e);f(window).on("scroll",e)});["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(o){f.fn[o]=function(p){return this.on(o,p)}})})(Zepto);(function(b,d){var p="",r,n={Webkit:"webkit",Moz:"",O:"o"},j=document.createElement("div"),l=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,h,o,i,s,c,e,k,q,g,m={};function f(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function a(t){return r?r+t:t.toLowerCase()}if(j.style.transform===d){b.each(n,function(u,t){if(j.style[u+"TransitionProperty"]!==d){p="-"+u.toLowerCase()+"-";r=t;return false}})}h=p+"transform";m[o=p+"transition-property"]=m[i=p+"transition-duration"]=m[c=p+"transition-delay"]=m[s=p+"transition-timing-function"]=m[e=p+"animation-name"]=m[k=p+"animation-duration"]=m[g=p+"animation-delay"]=m[q=p+"animation-timing-function"]="";b.fx={off:(r===d&&j.style.transitionProperty===d),speeds:{_default:400,fast:200,slow:600},cssPrefix:p,transitionEnd:a("TransitionEnd"),animationEnd:a("AnimationEnd")};b.fn.animate=function(u,x,w,v,t){if(b.isFunction(x)){v=x,w=d,x=d}if(b.isFunction(w)){v=w,w=d}if(b.isPlainObject(x)){w=x.easing,v=x.complete,t=x.delay,x=x.duration}if(x){x=(typeof x=="number"?x:(b.fx.speeds[x]||b.fx.speeds._default))/1000}if(t){t=parseFloat(t)/1000}return this.anim(u,x,w,v,t)};b.fn.anim=function(v,x,w,D,y){var E,A={},C,u="",z=this,B,F=b.fx.transitionEnd,t=false;if(x===d){x=b.fx.speeds._default/1000}if(y===d){y=0}if(b.fx.off){x=0}if(typeof v=="string"){A[e]=v;A[k]=x+"s";A[g]=y+"s";A[q]=(w||"linear");F=b.fx.animationEnd}else{C=[];for(E in v){if(l.test(E)){u+=E+"("+v[E]+") "}else{A[E]=v[E],C.push(f(E))}}if(u){A[h]=u,C.push(h)}if(x>0&&typeof v==="object"){A[o]=C.join(", ");A[i]=x+"s";A[c]=y+"s";A[s]=(w||"linear")}}B=function(G){if(typeof G!=="undefined"){if(G.target!==G.currentTarget){return}b(G.target).unbind(F,B)}else{b(this).unbind(F,B)}t=true;b(this).css(m);D&&D.call(this)};if(x>0){this.bind(F,B);setTimeout(function(){if(t){return}B.call(z)},((x+y)*1000)+25)}this.size()&&this.get(0).clientLeft;this.css(A);if(x<=0){setTimeout(function(){z.each(function(){B.call(this)})},0)}return this};j=null})(Zepto);(function(d,e){var h=window.document,a=h.documentElement,b=d.fn.show,i=d.fn.hide,g=d.fn.toggle;function c(l,m,j,o,n){if(typeof m=="function"&&!n){n=m,m=e}var k={opacity:j};if(o){k.scale=o;l.css(d.fx.cssPrefix+"transform-origin","0 0")}return l.animate(k,m,null,n)}function f(j,k,m,l){return c(j,k,0,m,function(){i.call(d(this));l&&l.call(this)})}d.fn.show=function(j,k){b.call(this);if(j===e){j=0}else{this.css("opacity",0)}return c(this,j,1,"1,1",k)};d.fn.hide=function(j,k){if(j===e){return i.call(this)}else{return f(this,j,"0,0",k)}};d.fn.toggle=function(j,k){if(j===e||typeof j=="boolean"){return g.call(this,j)}else{return this.each(function(){var l=d(this);l[l.css("display")=="none"?"show":"hide"](j,k)})}};d.fn.fadeTo=function(k,j,l){return c(this,k,j,null,l)};d.fn.fadeIn=function(j,k){var l=this.css("opacity");if(l>0){this.css("opacity",0)}else{l=1}return b.call(this).fadeTo(j,l,k)};d.fn.fadeOut=function(j,k){return f(this,j,null,k)};d.fn.fadeToggle=function(j,k){return this.each(function(){var l=d(this);l[(l.css("opacity")==0||l.css("display")=="none")?"fadeIn":"fadeOut"](j,k)})}})(Zepto);